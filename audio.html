<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PufutaraMusic | Web Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: #fff;
            color: #000;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* --- Layout Utama --- */
        .app-container { display: flex; flex: 1; overflow: hidden; }

        /* --- Sidebar (Kiri) --- */
        .sidebar {
            width: 260px;
            background-color: #f9f9f9;
            border-right: 1px solid #eee;
            display: flex;
            flex-direction: column;
            padding: 24px 20px;
            z-index: 10;
        }

        .logo { font-size: 1.4rem; font-weight: 900; letter-spacing: -1px; margin-bottom: 40px; }

        .nav-menu, .playlist-menu { list-style: none; margin-bottom: 40px; }
        .nav-menu li, .playlist-menu li { margin-bottom: 12px; }

        .nav-menu a, .playlist-menu a {
            text-decoration: none;
            color: #777;
            font-weight: 600;
            font-size: 0.95rem;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
        }
        .playlist-menu a { font-weight: 500; font-size: 0.9rem; }

        .nav-menu a:hover, .nav-menu a.active, .playlist-menu a:hover, .playlist-menu a.active { color: #000; }

        .playlist-section h4 {
            font-size: 0.75rem; color: #aaa; text-transform: uppercase;
            letter-spacing: 2px; margin-bottom: 15px;
        }

        /* --- Main Content (Kanan) --- */
        .main-view {
            flex: 1; overflow-y: auto; padding: 30px 40px; background: #fff; padding-bottom: 120px;
        }
        .main-view::-webkit-scrollbar { width: 8px; }
        .main-view::-webkit-scrollbar-thumb { background: #ddd; border-radius: 4px; }

        header.top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
        .back-btn { text-decoration: none; color: #999; font-size: 0.9rem; transition: 0.3s; }
        .back-btn:hover { color: #000; }
        .profile-btn { width: 35px; height: 35px; background: #000; color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.9rem; }

        h1.greeting { font-size: 2.5rem; font-weight: 900; letter-spacing: -1.5px; margin-bottom: 15px; }
        .section-title { font-size: 1.2rem; font-weight: 800; margin-bottom: 20px; margin-top: 30px;}

        /* --- Search Bar --- */
        .search-container { margin-bottom: 40px; }
        .search-bar { width: 100%; max-width: 400px; padding: 12px 20px; border: 1px solid #eee; border-radius: 100px; font-size: 0.95rem; outline: none; background: #f9f9f9; transition: all 0.3s ease; }
        .search-bar:focus { border-color: #000; background: #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        /* --- Views / Tabs --- */
        .tab-content { display: none; animation: fadeIn 0.4s ease forwards; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Music Grid --- */
        .music-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 25px; margin-bottom: 40px; }
        .music-card { background: #fff; padding: 15px; border-radius: 12px; border: 1px solid #f0f0f0; transition: all 0.3s ease; cursor: pointer; position: relative; }
        .music-card:hover { background: #f9f9f9; border-color: #e0e0e0; transform: translateY(-3px); }

        .cover-art { width: 100%; aspect-ratio: 1/1; background: #eee; border-radius: 8px; margin-bottom: 15px; position: relative; }
        .play-hover-btn { position: absolute; bottom: 10px; right: 10px; width: 45px; height: 45px; background: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; opacity: 0; transform: translateY(10px); transition: all 0.3s ease; box-shadow: 0 8px 20px rgba(0,0,0,0.2); }
        .music-card:hover .play-hover-btn { opacity: 1; transform: translateY(0); }
        .play-hover-btn::after { content: ''; border-top: 6px solid transparent; border-bottom: 6px solid transparent; border-left: 10px solid #fff; margin-left: 3px; }

        .music-card h3 { font-size: 0.95rem; font-weight: 700; margin-bottom: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .music-card p { font-size: 0.8rem; color: #888; }
        .no-results { display: none; text-align: center; padding: 40px 0; color: #888; grid-column: 1 / -1; }

        /* --- Player Bar --- */
        .player-bar { position: fixed; bottom: 0; width: 100%; height: 90px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-top: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; padding: 0 30px; z-index: 1000; }
        .now-playing { display: flex; align-items: center; gap: 15px; width: 30%; }
        .np-cover { width: 56px; height: 56px; background: #e6e6e6; border-radius: 6px; transition: background 0.3s; }
        .np-info h4 { font-size: 0.95rem; font-weight: 700; }
        .np-info p { font-size: 0.75rem; color: #888; }
        .player-controls { display: flex; flex-direction: column; align-items: center; width: 40%; }
        .control-buttons { display: flex; align-items: center; gap: 20px; margin-bottom: 8px; }
        .btn-control { background: none; border: none; color: #666; font-size: 1.2rem; cursor: pointer; transition: 0.2s; }
        .btn-control:hover { color: #000; }
        .btn-play-main { width: 35px; height: 35px; background: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
        .btn-play-main:hover { transform: scale(1.05); }
        .btn-play-main::after { content: ''; border-top: 5px solid transparent; border-bottom: 5px solid transparent; border-left: 8px solid #fff; margin-left: 2px; }
        .btn-play-main.playing::after { border: none; border-left: 3px solid #fff; border-right: 3px solid #fff; width: 10px; height: 12px; margin-left: 0; }
        .playback-bar { display: flex; align-items: center; gap: 10px; width: 100%; max-width: 500px; }
        .playback-bar span { font-size: 0.7rem; color: #888; font-variant-numeric: tabular-nums; }
        .progress-bar { flex: 1; height: 4px; background: #eee; border-radius: 2px; position: relative; cursor: pointer; }
        .progress-bar .fill { position: absolute; top: 0; left: 0; height: 100%; width: 0%; background: #000; border-radius: 2px; transition: width 0.1s linear; }
        .volume-controls { width: 30%; display: flex; justify-content: flex-end; align-items: center; }
        .vol-bar { width: 100px; height: 4px; background: #eee; border-radius: 2px; margin-left: 10px; cursor: pointer; position: relative; }
        .vol-bar .fill { position: absolute; height: 100%; width: 100%; background: #000; border-radius: 2px; }
    </style>
</head>
<body>

    <audio id="mainAudio" src=""></audio>

    <div class="app-container">
        <aside class="sidebar">
            <div class="logo">PUFUTARA.</div>
            <ul class="nav-menu">
                <li><a class="nav-link active" data-target="view-beranda">Beranda</a></li>
                <li><a class="nav-link" data-target="view-cari">Cari</a></li>
                <li><a class="nav-link" data-target="view-koleksi">Koleksi Kamu</a></li>
            </ul>
            <div class="playlist-section">
                <h4>Playlist Putra</h4>
                <ul class="playlist-menu">
                    <li><a class="playlist-link" data-name="Koding Tengah Malam">Koding Tengah Malam</a></li>
                    <li><a class="playlist-link" data-name="Fokus Labkom 1">Fokus Labkom 1</a></li>
                    <li><a class="playlist-link" data-name="Lofi & Chill">Lofi & Chill</a></li>
                    <li><a class="playlist-link" data-name="Mengejar Deadline">Mengejar Deadline</a></li>
                </ul>
            </div>
        </aside>

        <main class="main-view">
            <header class="top-bar">
                <a href="index.html" class="back-btn">← Kembali ke Archive</a>
                <div class="profile-btn">P</div>
            </header>

            <div id="view-beranda" class="tab-content active">
                <h1 class="greeting">Selamat Datang.</h1>
                
                <h2 class="section-title">Baru Saja Diputar</h2>
                <div class="music-grid">
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"><div class="cover-art" style="background: #e0e0e0;"><div class="play-hover-btn"></div></div><h3>Kopi & Algoritma</h3><p>Lofi / Instrumental</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"><div class="cover-art" style="background: #ebebeb;"><div class="play-hover-btn"></div></div><h3>Syntax Error Lullaby</h3><p>Chillwave</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"><div class="cover-art" style="background: #f5f5f5;"><div class="play-hover-btn"></div></div><h3>Malam Tanpa Bug</h3><p>Acoustic</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"><div class="cover-art" style="background: #dcdcdc;"><div class="play-hover-btn"></div></div><h3>Deploy di Hari Jumat</h3><p>Upbeat / Synth</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"><div class="cover-art" style="background: #eaeaea;"><div class="play-hover-btn"></div></div><h3>Deep Focus 101</h3><p>Ambient</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3"><div class="cover-art" style="background: #f0f0f0;"><div class="play-hover-btn"></div></div><h3>CSS is Awesome</h3><p>Electronic</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3"><div class="cover-art" style="background: #e8e8e8;"><div class="play-hover-btn"></div></div><h3>Server Down Blues</h3><p>Jazz / Lo-fi</p></div>
                </div>

                <h2 class="section-title">Rekomendasi Pufutara</h2>
                <div class="music-grid">
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-16.mp3"><div class="cover-art" style="background: #e4e4e4;"><div class="play-hover-btn"></div></div><h3>Dark Mode On</h3><p>Synthwave</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-17.mp3"><div class="cover-art" style="background: #f4f4f4;"><div class="play-hover-btn"></div></div><h3>Stack Overflow Fix</h3><p>Indie Folk</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-18.mp3"><div class="cover-art" style="background: #d8d8d8;"><div class="play-hover-btn"></div></div><h3>Database Migration</h3><p>Techno</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-19.mp3"><div class="cover-art" style="background: #e9e9e9;"><div class="play-hover-btn"></div></div><h3>Sprint Review Chill</h3><p>Bossa Nova</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"><div class="cover-art" style="background: #f1f1f1;"><div class="play-hover-btn"></div></div><h3>Localhost:3000</h3><p>House Music</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"><div class="cover-art" style="background: #e1e1e1;"><div class="play-hover-btn"></div></div><h3>Hello World Acoustic</h3><p>Unplugged</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-13.mp3"><div class="cover-art" style="background: #e6e6e6;"><div class="play-hover-btn"></div></div><h3>Git Commit Push</h3><p>Pop Rock</p></div>
                </div>
            </div>

            <div id="view-cari" class="tab-content">
                <h1 class="greeting">Cari Lagu.</h1>
                <div class="search-container">
                    <input type="text" id="searchInput" class="search-bar" placeholder="Cari judul lagu atau genre...">
                </div>
                <h2 class="section-title">Semua Koleksi (21)</h2>
                
                <div class="music-grid" id="searchGrid">
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"><div class="cover-art" style="background: #e0e0e0;"><div class="play-hover-btn"></div></div><h3>Kopi & Algoritma</h3><p>Lofi / Instrumental</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"><div class="cover-art" style="background: #ebebeb;"><div class="play-hover-btn"></div></div><h3>Syntax Error Lullaby</h3><p>Chillwave</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"><div class="cover-art" style="background: #f5f5f5;"><div class="play-hover-btn"></div></div><h3>Malam Tanpa Bug</h3><p>Acoustic</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"><div class="cover-art" style="background: #dcdcdc;"><div class="play-hover-btn"></div></div><h3>Deploy di Hari Jumat</h3><p>Upbeat / Synth</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"><div class="cover-art" style="background: #eaeaea;"><div class="play-hover-btn"></div></div><h3>Deep Focus 101</h3><p>Ambient</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3"><div class="cover-art" style="background: #f0f0f0;"><div class="play-hover-btn"></div></div><h3>CSS is Awesome</h3><p>Electronic</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3"><div class="cover-art" style="background: #e8e8e8;"><div class="play-hover-btn"></div></div><h3>Server Down Blues</h3><p>Jazz / Lo-fi</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3"><div class="cover-art" style="background: #dfdfdf;"><div class="play-hover-btn"></div></div><h3>Terminal Echoes</h3><p>Cyberpunk Vibes</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3"><div class="cover-art" style="background: #f7f7f7;"><div class="play-hover-btn"></div></div><h3>Infinite Loop</h3><p>Trance</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3"><div class="cover-art" style="background: #e2e2e2;"><div class="play-hover-btn"></div></div><h3>API Request Timeout</h3><p>Slow Tempo</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-11.mp3"><div class="cover-art" style="background: #ececec;"><div class="play-hover-btn"></div></div><h3>Koding Sampai Pagi</h3><p>Lofi Beats</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-12.mp3"><div class="cover-art" style="background: #f2f2f2;"><div class="play-hover-btn"></div></div><h3>404 Not Found</h3><p>Chill Vibes</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-13.mp3"><div class="cover-art" style="background: #e6e6e6;"><div class="play-hover-btn"></div></div><h3>Git Commit Push</h3><p>Pop Rock</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-14.mp3"><div class="cover-art" style="background: #dadada;"><div class="play-hover-btn"></div></div><h3>Merge Conflict Stress</h3><p>Heavy Metal</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-15.mp3"><div class="cover-art" style="background: #eeeeee;"><div class="play-hover-btn"></div></div><h3>Refactoring Dreams</h3><p>Dream Pop</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-16.mp3"><div class="cover-art" style="background: #e4e4e4;"><div class="play-hover-btn"></div></div><h3>Dark Mode On</h3><p>Synthwave</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-17.mp3"><div class="cover-art" style="background: #f4f4f4;"><div class="play-hover-btn"></div></div><h3>Stack Overflow Fix</h3><p>Indie Folk</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-18.mp3"><div class="cover-art" style="background: #d8d8d8;"><div class="play-hover-btn"></div></div><h3>Database Migration</h3><p>Techno</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-19.mp3"><div class="cover-art" style="background: #e9e9e9;"><div class="play-hover-btn"></div></div><h3>Sprint Review Chill</h3><p>Bossa Nova</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"><div class="cover-art" style="background: #f1f1f1;"><div class="play-hover-btn"></div></div><h3>Localhost:3000</h3><p>House Music</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"><div class="cover-art" style="background: #e1e1e1;"><div class="play-hover-btn"></div></div><h3>Hello World Acoustic</h3><p>Unplugged</p></div>
                    <div class="no-results" id="noResults">Hmm, lagu yang kamu cari belum dikoding.</div>
                </div>
            </div>

            <div id="view-koleksi" class="tab-content">
                <h1 class="greeting">Koleksi Kamu.</h1>
                <h2 class="section-title">Lagu yang Disukai</h2>
                <div class="music-grid">
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-11.mp3"><div class="cover-art" style="background: #ececec;"><div class="play-hover-btn"></div></div><h3>Koding Sampai Pagi</h3><p>Lofi Beats</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-12.mp3"><div class="cover-art" style="background: #f2f2f2;"><div class="play-hover-btn"></div></div><h3>404 Not Found</h3><p>Chill Vibes</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"><div class="cover-art" style="background: #eaeaea;"><div class="play-hover-btn"></div></div><h3>Deep Focus 101</h3><p>Ambient</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3"><div class="cover-art" style="background: #dfdfdf;"><div class="play-hover-btn"></div></div><h3>Terminal Echoes</h3><p>Cyberpunk Vibes</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"><div class="cover-art" style="background: #e1e1e1;"><div class="play-hover-btn"></div></div><h3>Hello World Acoustic</h3><p>Unplugged</p></div>
                </div>
            </div>

            <div id="view-playlist" class="tab-content">
                <h1 class="greeting" id="playlistTitle">Nama Playlist</h1>
                <p style="color: #888; margin-bottom: 30px;">Daftar putar khusus untuk menemani harimu.</p>
                <div class="music-grid">
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"><div class="cover-art" style="background: #e0e0e0;"><div class="play-hover-btn"></div></div><h3>Kopi & Algoritma</h3><p>Lofi / Instrumental</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3"><div class="cover-art" style="background: #f0f0f0;"><div class="play-hover-btn"></div></div><h3>CSS is Awesome</h3><p>Electronic</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3"><div class="cover-art" style="background: #f7f7f7;"><div class="play-hover-btn"></div></div><h3>Infinite Loop</h3><p>Trance</p></div>
                    <div class="music-card" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-13.mp3"><div class="cover-art" style="background: #e6e6e6;"><div class="play-hover-btn"></div></div><h3>Git Commit Push</h3><p>Pop Rock</p></div>
                </div>
            </div>

        </main>
    </div>

    <footer class="player-bar">
        <div class="now-playing">
            <div class="np-cover" id="npCover"></div>
            <div class="np-info">
                <h4 id="npTitle">Pilih Lagu...</h4>
                <p>Pufutara Audio</p>
            </div>
        </div>
        <div class="player-controls">
            <div class="control-buttons">
                <button class="btn-control">⏮</button>
                <div class="btn-play-main" id="playBtn"></div>
                <button class="btn-control">⏭</button>
            </div>
            <div class="playback-bar">
                <span id="currentTime">0:00</span>
                <div class="progress-bar" id="progressBar"><div class="fill" id="progressFill"></div></div>
                <span id="durationTime">0:00</span>
            </div>
        </div>
        <div class="volume-controls">
            <span style="font-size: 0.8rem; color: #666;">Vol</span>
            <div class="vol-bar" id="volumeBar"><div class="fill" id="volumeFill"></div></div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. SISTEM TAB (SPA LOGIC) ---
            const navLinks = document.querySelectorAll('.nav-link');
            const playlistLinks = document.querySelectorAll('.playlist-link');
            const tabContents = document.querySelectorAll('.tab-content');
            const playlistTitleEl = document.getElementById('playlistTitle');

            function switchTab(targetId) {
                tabContents.forEach(tab => tab.classList.remove('active'));
                document.getElementById(targetId).classList.add('active');
                
                navLinks.forEach(l => l.classList.remove('active'));
                playlistLinks.forEach(l => l.classList.remove('active'));
            }

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    switchTab(link.getAttribute('data-target'));
                    link.classList.add('active');
                });
            });

            playlistLinks.forEach(link => {
                link.addEventListener('click', () => {
                    switchTab('view-playlist');
                    link.classList.add('active');
                    playlistTitleEl.textContent = link.getAttribute('data-name');
                });
            });

            // --- 2. FITUR PENCARIAN (Hanya di Tab Cari) ---
            const searchInput = document.getElementById('searchInput');
            const searchCards = document.querySelectorAll('#searchGrid .music-card');
            const noResults = document.getElementById('noResults');

            searchInput.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase().trim();
                let hasVisibleCards = false;

                searchCards.forEach(card => {
                    const title = card.querySelector('h3').textContent.toLowerCase();
                    const desc = card.querySelector('p').textContent.toLowerCase();
                    if (title.includes(query) || desc.includes(query)) {
                        card.style.display = ''; 
                        hasVisibleCards = true;
                    } else {
                        card.style.display = 'none'; 
                    }
                });
                noResults.style.display = (!hasVisibleCards && query !== '') ? 'block' : 'none';
            });

            // --- 3. FITUR AUDIO PLAYER ---
            const audioPlayer = document.getElementById('mainAudio');
            const playBtn = document.getElementById('playBtn');
            const npTitle = document.getElementById('npTitle');
            const npCover = document.getElementById('npCover');
            const progressBar = document.getElementById('progressBar');
            const progressFill = document.getElementById('progressFill');
            const currentTimeEl = document.getElementById('currentTime');
            const durationTimeEl = document.getElementById('durationTime');
            const volumeBar = document.getElementById('volumeBar');
            const volumeFill = document.getElementById('volumeFill');
            
            const allMusicCards = document.querySelectorAll('.music-card');

            const formatTime = (time) => {
                if (isNaN(time)) return "0:00";
                const m = Math.floor(time / 60);
                const s = Math.floor(time % 60);
                return `${m}:${s < 10 ? '0' : ''}${s}`;
            };

            allMusicCards.forEach(card => {
                card.addEventListener('click', () => {
                    npTitle.textContent = card.querySelector('h3').textContent;
                    npCover.style.background = card.querySelector('.cover-art').style.background;
                    audioPlayer.src = card.getAttribute('data-src');
                    audioPlayer.play();
                    playBtn.classList.add('playing');
                });
            });

            playBtn.addEventListener('click', () => {
                if (!audioPlayer.src || audioPlayer.src.endsWith(window.location.pathname)) return;
                if (audioPlayer.paused) {
                    audioPlayer.play();
                    playBtn.classList.add('playing');
                } else {
                    audioPlayer.pause();
                    playBtn.classList.remove('playing');
                }
            });

            audioPlayer.addEventListener('timeupdate', () => {
                progressFill.style.width = `${(audioPlayer.currentTime / audioPlayer.duration) * 100}%`;
                currentTimeEl.textContent = formatTime(audioPlayer.currentTime);
            });

            audioPlayer.addEventListener('loadedmetadata', () => {
                durationTimeEl.textContent = formatTime(audioPlayer.duration);
            });

            progressBar.addEventListener('click', (e) => {
                const clickX = e.clientX - progressBar.getBoundingClientRect().left;
                audioPlayer.currentTime = (clickX / progressBar.offsetWidth) * audioPlayer.duration;
            });

            audioPlayer.addEventListener('ended', () => {
                playBtn.classList.remove('playing');
                progressFill.style.width = `0%`;
            });

            volumeBar.addEventListener('click', (e) => {
                let vol = (e.clientX - volumeBar.getBoundingClientRect().left) / volumeBar.offsetWidth;
                vol = Math.max(0, Math.min(1, vol));
                audioPlayer.volume = vol;
                volumeFill.style.width = `${vol * 100}%`;
            });
        });
    </script>
</body>
</html>
